<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Frequently asked questions &#8212; beat 1.0 documentation</title>
    <link rel="stylesheet" href="_static/pydoctheme.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/sidebar.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="API Reference" href="api.html" />
    <link rel="prev" title="Example 5: Kinematic finite-fault estimation" href="examples/FFI_kinematic.html" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <link rel="shortcut icon" type="image/png" href="_static/favicon.png" />
    <meta name="viewport" content="width=device-width,initial-scale=0.8">
    
    
      <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto+Slab">
    
    
    <script type="text/javascript" src="_static/jquery.gifplayer.js"></script>
    <link rel="stylesheet" type="text/css" href="_static/gifplayer.css">
    <!-- Piwik -->
    <script type="text/javascript">
      var _paq = _paq || [];
      /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
      _paq.push(['trackPageView']);
      _paq.push(['enableLinkTracking']);
      (function() {
        var u="//pyrocko.org/pwk/";
        _paq.push(['setTrackerUrl', u+'piwik.php']);
        _paq.push(['setSiteId', '1']);
        var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
        g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
      })();
    </script>
    <noscript>
    <img src="https://pyrocko.org/pwk/piwik.php?idsite=1&rec=1" style="border:0" alt="" />
    </noscript>

  </head>
  <body>

    <div class="related">
      <h3>Navigation</h3>
        <ul>
          <li class="responsive-menu"><a href="#sidebar-anchor" title="Navigation">&#9776;</a></li>
          <li>
            <img src='https://pyrocko.org/_static/pyrocko.svg' class='pyrocko-button' onclick="window.location = 'https://pyrocko.org';">
          </li>
           &#187;
          <li>
              <a href="index.html">beat 1.0 documentation</a> &#187;
          </li> 
        </ul>
    </div>
    

  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="frequently-asked-questions">
<h1>Frequently asked questions<a class="headerlink" href="#frequently-asked-questions" title="Permalink to this headline">¶</a></h1>
<div class="line-block">
<div class="line">Below you find a list for known errors, that may occur and how to work around:</div>
<div class="line"><br /></div>
<div class="line"><strong>1. HDF5surrogate escape</strong></div>
</div>
<p>NameError: global name ‘exc’ is not defined</p>
<div class="line-block">
<div class="line">add:</div>
<div class="line">export LC_ALL=en_AU.utf8</div>
<div class="line">to your .bashrc</div>
<div class="line"><br /></div>
<div class="line"><strong>2. Theano MKL support</strong></div>
</div>
<p>RuntimeError: To use MKL 2018 with Theano you MUST set “MKL_THREADING_LAYER=GNU” in your environement.</p>
<div class="line-block">
<div class="line">add</div>
<div class="line">export MKL_THREADING_LAYER=GNU</div>
<div class="line">to your .bashrc</div>
<div class="line"><br /></div>
<div class="line"><strong>3. Slow compilation</strong></div>
</div>
<p>No error will be thrown, but during “beat sample” the compilation of the forward model function ḿay take a long time.
In such a case the default compilation flags of theano may be overwritten. This may result in longer runtime.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">THEANO_FLAGS</span><span class="o">=</span><span class="n">optimizer</span><span class="o">=</span><span class="n">fast_compile</span> <span class="n">beat</span> <span class="n">sample</span> <span class="n">Projectpath</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><strong>4. MPI rank always 0</strong></div>
</div>
<p>ValueError: Specified more workers that sample in the posterior “8”, than there are total number of workers “0”</p>
<div class="line-block">
<div class="line">There is an inconsistency in the MPI executable that is used for starting the sampler and the library that was used to compile mpi4py.</div>
<div class="line">Please make sure to use the same MPI library. One fix would be to remove all installations of MPI from the machine and install a fresh version.</div>
</div>
<div class="line-block">
<div class="line"><strong>5. GF store error BAD_REQUEST</strong></div>
</div>
<p>This means that the geodetic (static) Green’s Function store does not cover the full depth-distance range of the source- receiver pairs.
Please make sure that these ranges are wide enough in depths and distances!</p>
<div class="line-block">
<div class="line"><strong>6. Upgrading BEAT from beta</strong></div>
</div>
<p>Unfortunately, some incompatibility arose from beta to version 1.0. Finite fault projects that have been sampled and created using the beta version will need to undergo some manual changes by the user to be loadable under version 1.0.</p>
<ol class="arabic">
<li><p class="first">Rename config_ffo.yaml to config_ffi.yaml</p>
</li>
<li><p class="first">Rename “$project_folder/ffo” to “$project_folder/ffi”</p>
</li>
<li><p class="first">To update the config file run:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>beat update $project_folder --mode=ffi  # (--diff to display updates first)
</pre></div>
</div>
</li>
<li><p class="first">According to the $datatypes that were included in the project, recreate the fault geometry with:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>beat build_gfs $project_folder --mode=ffi --force --datatypes=$datatypes
</pre></div>
</div>
</li>
</ol>
<div class="line-block">
<div class="line"><strong>7. Cannot connect to display while working remotely</strong></div>
</div>
<p>X forwarding needs to be activated in the ssh config! For linux:</p>
<ol class="arabic">
<li><p class="first">vi /etc/ssh/ssh_config</p>
</li>
<li><p class="first">set “X11Forwarding” to “yes”, save and close</p>
</li>
<li><p class="first">in the shell run:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">systemctl</span> <span class="n">restart</span> <span class="n">sshd</span>   <span class="c1"># could require sudo rights</span>
</pre></div>
</div>
</li>
</ol>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
    <a id="sidebar-anchor"></a>
    
<h3><a href="index.html">Table Of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="short_installation.html">Short Installation instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="anaconda_installation.html">Anaconda Installation instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Detailed Installation instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="updating.html">Updating beat</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started/index.html">Getting started with BEAT</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/index.html">Examples</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Frequently asked questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Reference</a></li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
    &nbsp;
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="api.html" title="API Reference"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="examples/FFI_kinematic.html" title="Example 5: Kinematic finite-fault estimation"
             accesskey="P">previous</a> |</li>
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Hannes Vasyura-Bathke.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.7.
    </div>
  </body>
</html>